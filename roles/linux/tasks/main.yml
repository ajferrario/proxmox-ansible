---
- name: make direcotry
  file:
    path: "{{home_path + '/.ssh'}}"
    state: directory
- name: create empty file
  file:
    path: "{{home_path + '/.ssh/authorized_keys'}}"
    state: touch
- name: put pubkey
  lineinfile:
    path: "{{home_path + '/.ssh/authorized_keys'}}"
    line: "{{ pubkey }}"
# packages
- name: make sure all base packages are installed
  package:
    name: "{{ item }}"
    state: latest
  with_items: "{{ packages }}"

- name: upgrade all packages to latest version
  package: name=* state=latest
# networking
- name: update hostname
  hostname: "{{ hostname }}" 
